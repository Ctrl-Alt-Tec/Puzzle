<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.75">

  <title>CTRL+ALT+TEC Puzzle</title>
  <script>
    TogetherJSConfig_cloneClicks = true;
    TogetherJSConfig_includeHashInUrl = true; 
    TogetherJSConfig_ignoreForms = true;
  </script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/ace.js"></script>
  <script src="https://droplet-editor.github.io/assets/droplet-full.js"></script>
  <script src="https://droplet-editor.github.io/assets/ace/mode-javascript.js"></script>
  <script src="https://togetherjs.com/togetherjs-min.js"></script>
  <link rel="stylesheet" href="https://droplet-editor.github.io/assets/droplet.css">
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    body {
      background-color: #fff;
      font-family: sans-serif;
      overflow: hidden;
      display: flex;
      flex-direction: column
    }
    
    #blocklyArea {
      height: 99%;
    }
    .blocklyDraggable .blocklyPathDark{
      fill: none
     }
    .blocklyDraggable .blocklyPathLight{
      stroke: none
     }
    .app-container{
      display: flex;
      flex-direction: row;
      flex-grow: 2;
      flex-wrap: wrap
    }
    
    
    
    
    .logo{
        height: 48px;
      }
      footer .logo{
        margin-left: auto;
        margin-right: auto;
        height: 70px;
      }
  
      .header{
        display: flex;
        flex-direction: row;
        align-items: center;
        align-content: center;
        position: sticky; 
        margin: 0;
        background-color: white;
        width: 100%;
        padding: 0px;
        font-family: 'Arial';
        font-size: 16;
        top: 0; 
        box-sizing: border-box;
        justify-content: space-between;
        flex-wrap: wrap;
        overflow: hidden;
        box-shadow: 0px 1px 3px rgba(0,0,0,0.12), 0px 1px 2px rgba(0,0,0,0.24);
        z-index: 9999
      }
      .header>*{
        display: flex;
        text-align: center;
        align-items: center;
        margin: 8px;
        padding: 8px;
      }
      .header-top{
          display: flex;
          flex-direction: row;
          align-items: flex-start
      }
      
      .header-toolbar{
        display: flex;
        flex-direction: row;
        flex: 1;
        justify-content: space-between;
        width: 100%;
        max-width: 658px;
        box-sizing: border-box;
        padding: 0px
      }
      .header-toolbar-button{
        padding: 16px;
        margin: 4px;
        border-radius: 32px;
        flex: 1;
        background-color: whitesmoke;
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: space-around;
      }
      .header-toolbar-button .material-icons{
        font-size: 32px !important;
      }
      #blocklyDiv{
        position: relative !important;
        flex: 2;
        background-color: whitesmoke !important
      }
      .droplet-palette-wrapper{
        width: 320px !important;
      }
      .droplet-palette-header,.droplet-palette-canvas{
        background: transparent !important;
        border: none; 
        padding: 16px; 
        box-sizing: border-box;
        width: 100%;
      }
      .droplet-palette-canvas{
        height: 100% !important;
        overflow: overlay
      }
      .droplet-wrapper-div{
        z-index: 1000; 
        box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
      }
      .droplet-palette-group-header{
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase
      }
      .droplet-gutter{
        background: white;
      }
      .droplet-main-canvas g:nth-of-type(3) .droplet-background-path{
        fill: white
      }
      .droplet-main-canvas{
        background: white
      }
      .droplet-drag-canvas{
        z-index: 9999
      }
      text{
        font-family: 'Source Code Pro';
        pointer-events: all
      }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-top">
      <a href="http://ctrl-alt-tec.github.io/Website" style="margin-right: 8px"><img src="https://ctrl-alt-tec.github.io/Website/img/LOGO-INLINE.png" height="48px"></a>
      <img class="logo" src="logo-name.png">
    </div>
    <div class="header-toolbar">
      <div class="header-toolbar-button" style="flex: 100; background: transparent"></div>
      <div class="header-toolbar-button button_together" onclick="TogetherJS(this); return false;"><i class="material-icons">live_tv</i></div>
      <div class="header-toolbar-button button_code"><i class="material-icons">code</i></div>
      <div class="header-toolbar-button button_execute"><i class="material-icons">play_arrow</i></div>
    </div>
  </div>
  
  <div class="app-container">
    <div id="blocklyDiv" ></div>
    
  </div>

 

  <script>
    
var modes = {
  'javascript': {
    mode: 'javascript',
    viewSettings: {
      padding: 4,
    }, 
    palette: [
      {
        'name': 'Input/Output',
        'color': 'blue',
        'blocks': [
          {'block': 'alert("hello");'},
          {'block': 'var a = prompt("hello");'},
        ]
      },
      {
        'name': 'Variables',
        'color': 'blue',
        'blocks': [
          {'block': 'var a = 10;'},
          {'block': 'a = 10;'},
          {'block': 'a += 1;'},
          {'block': 'a -= 10;'},
          {'block': 'a *= 1;'},
          {'block': 'a /= 1;'},
          {'block': 'a'},
        ]
      },
      {
        'name': 'Functions',
        'color': 'purple',
        'blocks': [
          {'block': 'function myFunction(param) {\n  __\n}'},
          {'block': 'myFunction(arg);'},
        ]
      },
      {
        'name': 'Logic',
        'color': 'teal',
        'blocks': [
          {'block': 'a === b'},
          {'block': 'a !== b'},
          {'block': 'a > b'},
          {'block': 'a < b'},
          {'block': 'a || b'},
          {'block': 'a && b'},
          {'block': '!a'}
        ]
      },
      {
        'name': 'Operators',
        'color': 'green',
        'blocks': [
          {'block': 'a + b'},
          {'block': 'a - b'},
          {'block': 'a * b'},
          {'block': 'a / b'},
          {'block': 'a % b'},
          {'block': 'Math.pow(a, b)'},
          {'block': 'Math.sin(a)'},
          {'block': 'Math.tan(a)'},
          {'block': 'Math.cos(a)'},
          {'block': 'Math.random()'}
        ]
      },
      {
        'name': 'Control flow',
        'color': 'orange',
        'blocks': [
          {'block': 'for (var i = 0; i < 10; i++) {\n  __\n}'},
          {'block': 'if (a === b) {\n  __\n}'},
          {'block': 'if (a === b) {\n  __\n} else {\n  __\n}'},
          {'block': 'while (true) {\n  __\n}'},
        ]
      },
    ]
  }}
  var editor = new droplet.Editor(document.querySelector("#blocklyDiv"), modes['javascript']);
  document.querySelector(".button_code").addEventListener("click", function(){
    editor.toggleBlocks()
  })
  document.querySelector(".button_execute").addEventListener("click", function(){
    try {
      eval(editor.getValue())
    } catch (error) {
      alert(error)
    }
  })

  var updateLive = true;
  editor.on("change", function(){
    if(TogetherJS.running && updateLive){
      TogetherJS.send({type: 'sharedCode', code: editor.getValue()})
    }
  })
  editor.aceEditor.on("change", function(){
    if(TogetherJS.running && updateLive){
      TogetherJS.send({type: 'sharedCode', code: editor.getAceValue()})
    }
  })
  TogetherJS.hub.on("sharedCode", function(msg){
    updateLive = false
    editor.setValue(msg.code);
    setTimeout(function(){updateLive=true}, 20);
  })

 
  </script>

</body>
</html>

